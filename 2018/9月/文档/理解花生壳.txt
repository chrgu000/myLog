引子

  总的说，花生壳的作用是让别人能访问你的网站，而且你的网站就放在你自己的机子里，而不是放到网上的某个服务器的空间里。

              一

  你能上网，但你的机子不在网上！？

  就如同你在剧院，但别人在台上，你只能在台下。在台上的大家（包括台下的）都看得到，而看不到台下的你。

  你非常想表演，于是你在家里演好录下来，再送到人家的舞台上播放。这就是常见的一种方式：到网上申请一个空间，再把你做的网站传上去。

  开始这种方式是免费的，大家玩得十分开心，但后来人家不干了，要收费，郁闷！

  自己的硬盘这么大，为何一定要放到别人的机子里，就在自己电脑上表演吧！可是做好的东西，别人怎么也访问不了！“茫茫网海，我在那里”，你不禁发出一声长叹！

  花生壳来也！

                       二

  这个东西涉及到对互联网的联网机制的理解。

  首先，互联网上的计算机都是通过IP地址连络通讯的,IP地址就是电脑的门牌。其次，IP地址是有限的，不可能凡上互联网的电脑都配一个。

  为了解决IP的不足，同时为了便于管理，互联网可以看成是由很多局域网(通俗理解：局部的网络)联起来构成的，一个局域网内部的电脑的IP地址由它的主人来设定就行。

  由于不同的局域网不是直接联系的,所以只要一个局域网内部电脑的IP各不相同就行,不同局域网的IP是可以重复的。这样的IP地址就是常说的内网IP。

  由于每个局域网各自为政，没有统一的地址安排－－要统一安排也很难，遇到一个故意捣蛋的就影响全世界啊，而且当前这样更灵活－－所以局域网内的电脑的IP是通过网关屏蔽起来的，因此称为内网电脑。也就是说，在A局域网内部每个机子看不到B局域网内部机子的IP，看到的最多就是网关(局域网和外部联系的设备)的IP。对于互联网来说，我们上网时访问的IP都是全世界统一安排的，也就是外网IP，它也许是一台电脑，更大可能其实是一个网关（当然也有用电脑专们做关网的），比如我们访问新浪，一个域名、一个IP，难道那么多东西都在一台电脑上，当然不是，其实是在很多台电脑上，通过统一的网关供人访问而己。

  两个局域网都可以联到互联网上，并且通过互联网实现相互访问。
这时为什么不会发生IP地址冲突问题呢，因为它们并不是直接访问的，而是通过网关代理，对于局域网外面的电脑来说，这个局域网就象是一台电脑一样，外面的电脑看到的IP其实是局域网的网关的IP，它与局域网内部的某台电脑通讯看起来好象就是同网关“这台电脑”通迅。

  问题是既然我们都己经联上了互联网，为何还需要花生壳。局域网就象一个房间，大家都在不同的房间里关着，如何知道谁在哪儿呢，房间里的人如何相互区分，建立联系呢？花生壳的作用就在这里：把你呈现到外网上！

    互联网看起来交互性很强，其实大多数服务是单向的，如Web服务，它让我们可以看网页，就象我们看电视一样，要让人看到电视，就必须将电视节目信息放到大家都可以接收和线路上，同样，要让别人看到你的网页，也必须放到能让别人直接访问的地方，可是你的机子是内网IP，别人是无法直接访问你的机子的。这就是问题所在，就象你在家里看CD别人无法看到一样。要让别人看到你的网页，就必须想办法让别人能够访问你的位置。

  再比如QQ，QQ用户之间要能够聊天，也要通过腾讯的服务器做媒人，一旦两个QQ用户互相建立联系之后，很多工作就一需要腾讯的服务器来做了，比如传聊天文字，传文件，传视频语音信息，都是直接的，因此其产腾讯服务器的工作量很小，它主要维护用户的登录状态就行。

  其实电讯或网通等宽带服务商可以更方便的花生壳这样的事（提供一个Web服务代理即可）。它们其实本来就是做代理，只不过它们只提供底层的最基本的TCP/IP网络互联代理。也就是只让电脑之间可以互传数据，这是底层的事。

                     三

  花生壳的原理基本是这样的：

  {本地(安装花生壳的用户)花生壳 Web服务代理 客服端<---互联网--->花生壳 Web服务代理 服务器端《----》Web服务器}<－－互联网－－>互联网上访问网页的用户

  其效果对于普通访问者来说，就如同你的网页直接放到了花生壳的网站一样，而其实你的网页还在你自己的电脑里。说明：花括弧部分的细节在访问网页的用户来说是看不到的，感觉如同访问一个普通网站一样；书名号边接的两端都在“花生壳公司”的服务器中，也许放在同一局域网的不同电脑中，也许就在一台电脑中也说不定。